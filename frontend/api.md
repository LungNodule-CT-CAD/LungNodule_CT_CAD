# **后端 API 文档**

本文档详细定义了 **CT 肺结节检测系统前端** 所依赖的后端 API 接口。前端通过这些接口与服务器进行通信，以实现核心的结节检测功能。

---

## **1. 概述**

-   **通信协议**: `HTTP/HTTPS`
-   **数据格式**: 请求体使用 `multipart/form-data`，响应体使用 `application/json`。
-   **错误处理**: API 应当遵循标准的 HTTP 状态码。例如，`200 OK` 表示成功，`4xx` 表示客户端错误，`5xx` 表示服务器错误。

---

## **2. 接口详解**

### **2.1. 肺结节检测**

-   **功能描述**:
    接收一个医学图像文件（如 DICOM），对其进行分析，并返回检测到的所有肺结节的位置和尺寸信息。这是本系统的核心功能接口。

-   **URL**: `/api/detect-nodules`

-   **请求方法**: `POST`

-   **请求头 (Headers)**:
    ```
    Content-Type: multipart/form-data
    ```

-   **请求体 (Body)**:
    请求体是一个 `FormData` 对象，包含以下字段：

| 字段名 | 类型 | 必需 | 描述 |
| :--- | :--- | :--- | :--- |
| `file` | File | 是 | 需要进行结节检测的图像文件。前端确保上传的是用户在界面上选择的当前活动图像。 |

-   **成功响应 (Success Response)**:
    -   **状态码**: `200 OK`
    -   **内容 (Body)**:
        一个 JSON 对象，其中包含一个名为 `nodules` 的数组。
        ```json
        {
          "nodules": [
            {
              "id": 1,
              "x": 256,
              "y": 312,
              "width": 15,
              "height": 18
            },
            {
              "id": 2,
              "x": 450,
              "y": 180,
              "width": 22,
              "height": 20
            }
          ]
        }
        ```
    -   **`nodules` 数组中每个对象的结构**:
| 字段名 | 类型 | 描述 |
| :--- | :--- | :--- |
| `id` | Number | 结节的唯一标识